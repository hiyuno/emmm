// Generated by CoffeeScript 1.6.3
(function() {
  $(function() {
    return emmm.init();
  });

  window.emmm = {
    init: function() {
      this.screeningTemplateMarkup = $("#screening-overview-template").html().replace(/[\t\n\r]/g, '');
      return this.addScreenings();
    },
    addScreenings: function() {
      var screening, _i, _len, _ref, _results;
      this.parseScreeningData();
      _ref = this.screenings;
      _results = [];
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        screening = _ref[_i];
        _results.push($("#screening-overview-wrapper").append(this.screeningTemplate(screening)));
      }
      return _results;
    },
    parseScreeningData: function() {
      var screening, _results;
      this.screenings = [];
      _results = [];
      for (screening in screeningData) {
        screening = screeningData[screening];
        screening.waffle.name = this.getWaffleName(screening.waffle);
        screening.drink.name = this.getDrinkName(screening.drink);
        _results.push(this.screenings.push({
          screening: screening
        }));
      }
      return _results;
    },
    screeningTemplate: function(data) {
      return _.template(this.screeningTemplateMarkup, data);
    },
    getWaffleName: function(waffle) {
      return "" + waffle.base + " waffles";
    },
    getDrinkName: function(drink) {
      if (drink.name != null) {
        return drink.name;
      } else {
        return "" + drink.base + " drinking vinegar";
      }
    }
  };

}).call(this);
